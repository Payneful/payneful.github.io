<!DOCTYPE HTML>
<html lang="en-us">
<head>
<meta charset="utf-8">
<title>Loan Calculator</title>
<script>
    /* Defining Table
    * Input: User input.
    * Processing: Calls function for calculations.
    * Output: payment amount.
    */
    function doPayment() {
        const principal = document.getElementById("principal").value;
        const annualRate = document.getElementById("annualRate").value;
        const years = document.getElementById("years").value;
        const periodsPerYear = document.getElementById("periodsPerYear").value;

        const total = "$" + computePayment(principal, annualRate, years, periodsPerYear).toFixed(2);

        document.getElementById("outputPayment").innerHTML = total;
    }

    /* Defining Table
    * Input: User input.
    * Processing: Calls function for calculations.
    * Output: Total payoff amount.
    */
    function doBalance() {
        const principal = document.getElementById("principal").value;
        const annualRate = document.getElementById("annualRate").value;
        const years = document.getElementById("years").value;
        const periodsPerYear = document.getElementById("periodsPerYear").value;
        const numberOfPaymentPaidToDate = document.getElementById("numberOfPaymentPaidToDate").value;

        const total = "$" + computeBalance(principal, annualRate, years, periodsPerYear, numberOfPaymentPaidToDate).toFixed(2);
    
        document.getElementById("outputPayoff").innerHTML = total;
    }

    /* Defining Table
    * Input: principal, annualRate, years, periodsPerYear.
    * Processing: Calculates the payment amount.
    * Output: Payment amount.
    */
    function computePayment (principal, annualRate, years, periodsPerYear) {
        const a = principal;
        const r = annualRate / periodsPerYear;
        const n = years * periodsPerYear;

        return (a * r) / (1-(Math.pow((1 + r), -n)));
    }

    /* Defining Table
    * Input: principal, annualRate, years, periodsPerYear.
    * Processing: Calculates the payoff amount.
    * Output: Payoff amount.
    */
    function computeBalance(principal, annualRate, years, periodsPerYear, numberOfPaymentPaidToDate) {
        const a = principal;
        const r = annualRate / periodsPerYear;
        const d = numberOfPaymentPaidToDate;
        const p = computePayment(principal, annualRate, years, periodsPerYear);

        return (a * (Math.pow((1 + r), d))) - ((p * (Math.pow((1 + r), d) - 1) / r));
    }


</script>
<style>
    html {
        margin: 0px;
        padding: 0px;
    }
    h1 {
        margin-bottom: 10px;
        margin-top: 10px;
    }
    #inOut {
        display: grid;
        line-height: 23px;
        grid-template-columns: 240px 110px;
        gap: 0px;
    }
    #input {
        text-align: right;
    }
    input {
        text-align: right;
    }
    #computeBalance {
        outline: rgba(0, 140, 255, 0.817) solid 1px;
    }
    button:hover {
        color: white;
        background-color: black;
        outline: none;
    }
</style>
</head>

<body>
    <h1>Loan Calculator</h1>
    <div id="inOut">
        <div id="text">
            <label for="principal">Amount borrowed (principal) </label><br>
            <label for="annualRate">Annual interest rate (example: .065) </label><br>
            <label for="years">Number of years </label><br>
            <label for="periodsPerYear">Payments per year </label><br>
            <button type="button" id="computePayment" onclick="doPayment()">Compute payment</button><br>
            <label for="numberOfPaymentPaidToDate">Number of payment paid to date </label><br>
            <button type="button" id="computeBalance" onclick="doBalance()">Compute payoff amount</button><br>
        </div>
        <div id="input">
            <input id="principal" type="text" size="10">
            <input id="annualRate" type="text" size="8">
            <input id="years" type="text" size="3">
            <input id="periodsPerYear" type="text" size="3">
            <div id="outputPayment"><br></div>
            <input id="numberOfPaymentPaidToDate" type="text" size="3">
            <div id="outputPayoff"><br></div>
        </div>
    </div>

    <!-- <label for="principal">Amount invested (principal) </label>
    <input id="principal" type="text"><br>
    <label for="annualRate">Annual rate (example: .08) </label>
    <input id="annualRate" type="text"><br> -->
</body>
</html>